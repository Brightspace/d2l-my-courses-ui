<dom-module id="d2l-course-tile-grid-styles">
	<template>
		<style>
		:host {
			display: block;
			-webkit-user-select: none;
			user-select: none;
			-webkit-touch-callout: none;
			-webkit-tap-highlight-color: rgba(0,0,0,0);
			-moz-tap-highlight-color: rgba(0,0,0,0);
			tap-highlight-color: rgba(0,0,0,0);
			touch-action: pan-x pan-y;

			--two-column-width: 49.5%;
			--three-column-width: 32.667%;
			--four-column-width: 24.25%;

			/* 3-2-1 grid vars */
			--breakpoint-gutter-width: 1.3%;

			--breakpoint-two-column-width: 48.7%;
			--breakpoint-three-column-width: 31.6%;

			/*
				Height has to be 73% of the width to maintain the image aspect ratio,
				use padding, as it sizes in relation to the width of the screen as opposed to the height (yay css!)
			*/
			--breakpoint-one-column-height: 73%;
			--breakpoint-two-column-height: 35.551%;
			--breakpoint-three-column-height: 23.068%;
		}

		.grid-container {
			position: relative;
			width: calc(100% + 20px);
			display: flex;
			flex-wrap: wrap;
			flex-direction: row;
			align-items: flex-start;
			/* To offset 10px left padding on tile containers, where tile image left edge must align with headers */
			margin-left: -10px;
		}
		.course-tile-container.animate > d2l-course-tile {
			margin-right: 0;
			margin-left: 0;
		}
		/*
		* Yay math!
		*
		* The overall width of an n-column layout should be 100%, which is to say:
		*	100% = n(tile width) + 2n(margin) - 2(margin),
		* Since the leftmost and rightmost tiles have zero margin on their left and right, respectively.
		*
		* Move things around, let x = tile width and y = margin width (n is number of columns)
		* 	x = (1 + 2y - 2ny) / n
		*
		* We can therefore find x (tile width) for any given y (margin).
		* The following all use a 1% margin and the formula above.
		*/
		.grid-child {
			width: 100%;
		}

		.columns-2 > .grid-child {
			width: var(--two-column-width);
		}

		.columns-3 > .grid-child {
			width: var(--three-column-width);
		}

		.columns-4 > .grid-child {
			width: var(--four-column-width);
		}

		.columns-2 > .grid-child,
		.columns-3 > .grid-child,
		.columns-4 > .grid-child {
			margin-left: 0.5%;
			margin-right: 0.5%;
		}

		.columns-2 > .grid-child:nth-child(2n),
		.columns-3 > .grid-child:nth-child(3n),
		.columns-4 > .grid-child:nth-child(4n) {
			margin-right: 0;
		}

		.columns-2 > .grid-child:nth-child(2n+1),
		.columns-3 > .grid-child:nth-child(3n+1),
		.columns-4 > .grid-child:nth-child(4n+1) {
			margin-left: 0;
		}

		.responsive-columns-3-2-1 {
			/* This needs to be a block so that we get the width-based padding-top for it's children on firefox */
			display: block;
		}

		.responsive-columns-3-2-1 > .grid-child {
			height: auto;
			position: relative;
			display: inline-block;
		}

		@media screen and (min-width: 992px) {
			.responsive-columns-3-2-1 > .grid-child {
				width: var(--breakpoint-three-column-width);
				padding-top: var(--breakpoint-three-column-height);
				margin: var(--breakpoint-gutter-width);
			}

			.responsive-columns-3-2-1 > .grid-child:nth-child(3n) {
				margin-right: 0;
			}

			.responsive-columns-3-2-1 > .grid-child:nth-child(3n+1) {
				margin-left: 0;
			}
		}

		@media screen and (max-width: 991px) and (min-width: 768px) {
			.responsive-columns-3-2-1 > .grid-child {
				width: var(--breakpoint-two-column-width);
				padding-top: var(--breakpoint-two-column-height);
				margin: var(--breakpoint-gutter-width);
			}

			.responsive-columns-3-2-1 > .grid-child:nth-child(2n) {
				margin-right: 0;
			}

			.responsive-columns-3-2-1 > .grid-child:nth-child(2n+1) {
				margin-left: 0;
			}
		}

		@media screen and (max-width: 767px) {
			.responsive-columns-3-2-1 > .grid-child {
				width: 100%;
				padding-top: var(--breakpoint-one-column-height);
				margin: var(--breakpoint-gutter-width) 0;
			}
		}
		</style>
	</template>
</dom-module>
