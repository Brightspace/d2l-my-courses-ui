<link rel="import" href="../../polymer/polymer.html">
<script>
	window.D2L = window.D2L || {};
	window.D2L.MyCourses = window.D2L.MyCourses || {};

	/*
	* Behavior for my courses alert messages
	*
	* This contains utility functions for adding and removing alerts
	*
	* @polymerBehavior D2L.MyCourses.AlertBehavior
	*/
	D2L.MyCourses.AlertBehavior = {
		properties: {
			// Array containing alert objects for display
			_alerts: {
				type: Array
			},
			_alertContainer: {
				type: Object,
				value: function() { return {}; }
			}
		},
		_alertToArray: function(alertContainer) {
			this._alerts = Object.keys(alertContainer).map(function(key) {
				if (!alertContainer[key]) {
					return null;
				}
				return {
					alertType: alertContainer[key].alertType,
					alertName: key,
					alertMessage: alertContainer[key].alertMessage
				};
			}.bind(this)).filter(function(element) {
				return element;
			});
		},
		_addAlert: function(type, name, message) {
			if (this._alertContainer) {
				this._alertContainer[name] = {
					alertType: type,
					alertMessage: message
				};
				this._alertToArray(this._alertContainer);
			}
		},
		_hasAlert: function(name) {
			return !!this._alertContainer && !!this._alertContainer[name];
		},
		_removeAlert: function(name) {
			if (this._alertContainer) {
				this._alertContainer[name] = null;
				this._alertToArray(this._alertContainer);
			}
		},
		_clearAlerts: function() {
			this._alerts = [];
			this._alertContainer = {};
		}
	};
</script>
