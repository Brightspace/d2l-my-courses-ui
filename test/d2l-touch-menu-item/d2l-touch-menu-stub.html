<link rel="import" href="../../../polymer/polymer.html">

<dom-module id="d2l-touch-menu-stub">
    <template>
        <style include="d2l-touch-menu-styles"></style>

        <div id="long-press-menu">
            <content></content>
        </div>
    </template>

    <script>
        Polymer({
            is: 'd2l-touch-menu',
            properties: {
                touchTarget: {
                    type: Object,
                    observer: '_touchTargetChanged'
                },
                longPressDuration: {
                    type: Number,
                    value: 500
                },
                _menuItemInitialOffset: {
                    type: Object
                },
                visible: {
                    type: Boolean
                },
                _timerID: {
                    type: Number
                },
                _touchHandlers: {
                    Type: Array,
                    value: [{
                        event: 'touchstart',
                        handler: 'touchstartHandler'
                    },  {
                        event: 'touchend',
                        handler:  'touchendHandler'
                    }, {
                        event: 'touchcancel',
                        handler:  'touchcancelHandler'
                    }, {
                        event: 'touchmove',
                        handler: 'touchmoveHandler'
                    }]
                },
                _touchStartEventData: {
                    type: Object
                },
                _host: {
                    type: Object
                },
                _menu: {
                    type: Object
                },
                _menuItems: {
                    type: Array
                },
                _owner: {
                    type: Object
                },
                _wasAttached: {
                    type: Boolean
                },
                _itemSelected: {
                    type: Boolean
                },
                _preventOpen: {
                    type: Boolean
                }
            },
            created: function() {
                    this._owner = document.createElement();
                    this._host = document.createElement();
                    this._menu = this.$$('#long-press-menu');

                    if(this.touchTarget == null) {
                        this.touchTarget = this._host;
                    }
                }
            },
            touchstartHandler: function (e) {
            },
            touchmoveHandler: function (e) {
            },
            touchendHandler: function (e) {
            },
            touchcancelHandler: function () {
            },
            openMenu: function (touchstartEvent) {
            },
            _touchTargetChanged: function(newValue, oldValue) {
            },
            _getWindow: function( elem ) {
                var retWindow = elem;

                if( (elem == null) || (elem !== elem.window)) {
                    retWindow =  (elem.nodeType === Node.DOCUMENT_NODE) && elem.defaultView;
                }

                return retWindow;
            },
            _offset: function( elem ) {
                var docElem, win,
                box = { top: 0, left: 0 },
                doc = elem && elem.ownerDocument;

                docElem = doc.documentElement;

                if ( typeof elem.getBoundingClientRect !== typeof undefined ) {
                    box = elem.getBoundingClientRect();
                }
                win = this._getWindow( doc );
                return {
                    top: box.top + win.pageYOffset - docElem.clientTop,
                    left: box.left + win.pageXOffset - docElem.clientLeft
                };
            },
            clearItemSelected: function() {
                if(this._itemSelected) {
                    this._itemSelected = false;
                    this.visible = false;
                }
            },
            contextMenuHandler: function(e) {
                e.preventDefault();
            },
            scrollHandler: function(e) {
                this._preventOpen = true;
            }
        });
    </script>
</dom-module>
